<script>
const URL = "https://agenda-areia-ana-default-rtdb.firebaseio.com/eventos.json";
const SENHA = "areia2025"; // senha de admin

async function incluirEvento() {

    const senhaDigitada = document.getElementById("senha").value;
    if (senhaDigitada !== SENHA) {
        alert("Senha incorreta.");
        return;
    }

    const data = document.getElementById("data").value;
    const titulo = document.getElementById("titulo").value;
    const cor = document.getElementById("cor").value;

    if (!data || !titulo) {
        alert("Preencha todos os campos.");
        return;
    }

    // 1. Busca eventos atuais
    const resp = await fetch(URL);
    let eventos = await resp.json();
    if (!eventos) eventos = [];

    // 2. Adiciona novo evento
    eventos.push({ data, titulo, cor });

    // 3. Salva de volta no Firebase
    await fetch(URL, {
        method: "PUT",
        body: JSON.stringify(eventos),
    });

    alert("Evento adicionado com sucesso!");
}
</script>
